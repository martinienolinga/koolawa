var isFirefox=!(window.mozInnerScreenX==null);var workspace={};workspace.administrationpanel={};workspace.agendapanel={};workspace.control={};workspace.drawpanel={};workspace.mailpanel={};workspace.paintpanel={};workspace.presentationpanel={};workspace.projectpanel={};workspace.spreadsheetpanel={};workspace.storagepanel={};workspace.studiopanel={};workspace.talkpanel={};workspace.writepanel={};$.fn.is_on_screen=function(c){var a=c.offset();a.right=a.left+c.get()[0].clientWidth;a.bottom=a.top+c.get()[0].clientHeight;a.is_on=function(l,e,k,d){var g=a.left;var j=a.top;var f=a.right;var i=a.bottom;var h=Math.max(0,Math.min(k,f)-Math.max(l,g));var m=Math.max(0,Math.min(d,i)-Math.max(e,j));return(h*m>0)};var b=this.offset();b.right=b.left+this.outerWidth();b.bottom=b.top+this.outerHeight();return(a.is_on(b.left,b.top,b.right,b.bottom))};function getRandomInt(b,a){return Math.floor(Math.random()*(a-b))+b}function htmlentities(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
Ext.onReady(function(){_script_name=_script_name.replace(/\/app\.php/g,"");var a={specialkey:function(g,f){if(f.getKey()===f.ENTER){fnLoginForm(d)}}};var d=Ext.create("Ext.form.Panel",{url:_request_scheme+"://"+_http_host+_script_name+"/login_check",renderTo:c,id:"loginform",cls:"my-form-class",defaults:{labelWidth:150},bodyStyle:"padding: 10px 10px 0 10px;",standardSubmit:true,items:[{xtype:"textfield",fieldLabel:"Compte",name:"_username",allowBlank:false,value:$("#_last_username").val(),listeners:a},{xtype:"textfield",inputType:"password",fieldLabel:"Mot de passe",name:"_password",allowBlank:false,listeners:a},{xtype:"checkbox",fieldLabel:"Se souvenir de moi",name:"_remember_me",checked:false,listeners:a},{xtype:"hidden",name:"_csrf_token",value:$("#csrf_token").val()}],buttons:[{id:"btn_login",text:"Se connecter",formBind:true,disabled:true,handler:function(){fnLoginForm(d)}},{id:"btn_reset",text:"Reinitialiser",handler:function(){fnResetForm(d)}}]});var b=$("#_error_message").val();if(b){d.title=b}var c=Ext.create("Ext.Window",{title:"Koolawa : Connexion",height:null,width:400,closable:false,items:[d]});c.show()});function fnLoginForm(a){a.getForm().submit({success:function(b,c){Ext.Msg.alert("Success","Login Successful!",function(d,e){if(d=="ok"){window.location=homeUrl}})},failure:function(b,c){Ext.Msg.alert("Warning",c.result.errorMessage)}})}function fnResetForm(a){a.getForm().reset()};
function symfony(e,b,a,c,d){_script_name=_script_name.replace(/\/app\.php/g,"");Ext.Ajax.request({url:_request_scheme+"://"+_http_host+_script_name+"/ajax/"+a+"/"+e+b,method:"POST",params:{args:JSON.stringify(c)},success:function(g){var f=JSON.parse(g.responseText);if(f.message!==undefined&&f.message.error!==""){Ext.MessageBox.show({title:"Koolawa",msg:f.message.error,buttons:Ext.MessageBox.OK,iconCls:"icon-error"});if(f.message.block!==undefined&&f.message.block){return}}d(f)}})};