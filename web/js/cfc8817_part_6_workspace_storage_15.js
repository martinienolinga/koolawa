workspace.storagepanel.getStorageMenu=function(){var a=workspace.workzone.getBeginMenu({menuForce:["Accueil","Edition"],onopen:function(g){alert("fichier: "+g.path)}});var e=Ext.create("Koolawa.ux.RibbonMenu",{id:"tabAllezA",title:"Allez-à",cls:"tab-menu tab-storage",closable:false});a.push(e);var d=Ext.create("Koolawa.ux.RibbonMenu",{id:"tabFavoris",title:"Favoris",cls:"tab-menu tab-storage",closable:false});a.push(d);var c=Ext.create("Koolawa.ux.RibbonMenu",{id:"tabOutils",title:"Outils",cls:"tab-menu tab-storage",closable:false});a.push(c);var b=Ext.create("Koolawa.ux.RibbonMenu",{id:"tabRecherche",title:"Recherche",cls:"tab-menu tab-storage",closable:false});a.push(b);a=workspace.workzone.getEndMenu(a);var f=Ext.create("Koolawa.ux.Ribbon",{id:"storageMenu",cls:"workspaceMenu",items:a,listeners:{afterrender:function(g){workspace.workzone.addShortMenu(g,[{cls:"icon-save_22white",tooltip:"Enregistrer"},{cls:"icon-undo_22white",tooltip:"Annuler la dernière action"},{cls:"icon-redo_22white",tooltip:"Refaire la dernière action"}])}}});$(window).on("resize",function(){var g=workspace.storagepanel.storageMenu;g.updateSize()});workspace.storagepanel.storageMenu=f;return f};workspace.storagepanel.newTab=function(c){var b=workspace.storagepanel.lastNumber+1;while($("#tabStorage"+b).get().length!=0){b++}workspace.storagepanel.lastNumber=b;var a=Ext.create("Ext.Panel",{id:"tabStorage"+b,title:c.title,cls:"tab-storagefile tab-kind-"+c.kind,closable:c.closable,kind:c.kind,counttab:b,listeners:{resize:function(){resizeStorageBox(this.counttab)},afterrender:function(e,d){startStorageBox(this.counttab)}},html:c.html});if(typeof c.collapsible!=="undefined"){a.collapsible=c.collapsible}if(typeof c.iconCls!=="undefined"&&c.iconCls!==null){a.collapsible=c.iconCls}return a};workspace.storagepanel.showDirectory=function(a,d){if(typeof d==="undefined"){d=false}var b=workspace.storagepanel.lastNumber;var c=workspace.storagepanel.newTab({kind:"directory",collapsible:false,iconCls:(d)?null:"icon-home"});c.path=Ext.widget("panel",{id:"storagepathpanel_"+b,border:false,region:"north",height:(d)?34:29,cls:"storagepath",layout:{padding:0}});c.content=Ext.widget("panel",{id:"storagecontentpanel_"+b,border:false,region:"center",cls:"storagecontent",viewConfig:{scroll:"vertical"}});c.status=Ext.widget("panel",{id:"storagestatuspanel_"+b,border:false,region:"south",height:34,cls:"storagestatus",layout:{padding:5}});c.layout="border";c.bodyBorder=false;c.defaults={collapsible:false};c.add(c.path);c.add(c.content);c.add(c.status);if(d){c.region="center";c.closable=false}else{c.title="Répertoire";c.closable=true;workspace.storagepanel.storagePanel.filesPanel.add(c)}return c};workspace.storagepanel.showFile=function(b){var a="";var c=workspace.storagepanel.newTab({title:"Fichier",closable:true,kind:"file",html:"<div>test fichier</div>"});workspace.storagepanel.storagePanel.filesPanel.add(c);return c};workspace.storagepanel.getStoragePanel=function(b){if(typeof b==="undefined"){b={}}if(typeof b.isCom==="undefined"){b.isCom=false}var c=workspace.storagepanel.getFileTreePanel(b);workspace.storagepanel.lastNumber=0;var d={};if(!b.isCom){d=Ext.create("Ext.tab.Panel",{region:"center",id:"filesPanel",resizeTabs:false,collapsible:false,items:[]})}else{d=workspace.storagepanel.showDirectory("new file 1",b.isCom)}if(!b.isCom){var e=Ext.create("Ext.Panel",{region:"east",id:"propertiesPanel",minWidth:200,width:300,items:[]})}var a=Ext.create("Ext.Panel",{region:"center",id:"storagePanel",layout:"border",bodyBorder:false,defaults:{collapsible:true,split:true}});a.add(c);a.add(d);if(!b.isCom){a.add(e)}a.treeFilesPanel=c;a.filesPanel=d;if(!b.isCom){a.propertiesPanel=e}workspace.storagepanel.storagePanel=a;if(!b.isCom){workspace.storagepanel.storageMenu.centerPanel=a}return a};workspace.centerpanel.initStoragePanel=function(){workspace.storagepanel.storagePanel.filesPanel.setActiveTab(workspace.storagepanel.showDirectory("new file 1"));workspace.storagepanel.showFile("new file 2")};