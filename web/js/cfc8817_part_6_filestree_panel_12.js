var xroot={};workspace.storagepanel.getFileTreePanel=function(){var a=Ext.create("Ext.Panel",{region:"west",minWidth:200,width:300,autoScroll:true,items:[workspace.storagepanel.getFilesTree()]});return a};workspace.storagepanel.getFilesTree=function(){Ext.define("filesTreeModel",{extend:"Ext.data.Model",fields:[{name:"text",type:"string"}],proxy:{type:"memory"}});var a=Ext.create("Ext.tree.Panel",{store:Ext.create("Ext.data.TreeStore",{model:"filesTreeModel"}),rootVisible:false,listeners:{afterrender:function(d,f){a.setRootNode({text:"Root",expanded:true,children:[{text:"Child 1",leaf:true},{text:"Child 2",leaf:false,children:[{text:"Child 1",leaf:false,children:[{text:"Child 1xx",leaf:true},{text:"Child 2",leaf:false,children:[{text:"Child 1",leaf:true},{text:"Child 2",leaf:true}]}]},{text:"Child 2",leaf:true}]}]});var c=a.getRootNode();var b=c.findChild("text","Child 1xx",true);var e=a.getView().getNode(b);alert(e.id)}}});return a;Ext.define("filesTreeModel",{extend:"Ext.data.Model",fields:[{name:"Id",type:"int"},{name:"id",type:"string"},{name:"title",type:"string"},{name:"nodek",type:"string"},{name:"path",type:"string"},{name:"fpath",type:"string"},{name:"text",type:"string"},{name:"groupid",type:"int"}]});a=Ext.create("Ext.tree.Panel",{autoHeight:true,rootVisible:false,listeners:{afterrender:function(b,c){var d=new Ext.LoadMask({target:a,msg:"Veuillez patienter ..."});d.show();symfony("list","directories","storage",{},function(e){a.setRootNode({children:e.data});d.hide()})},itemclick:function(e,h,g,f,c){if(!h.get("leaf")){var b=workspace.storagepanel.storagePanel.filesPanel.getActiveTab();if(b.kind!=="directory"){b=workspace.storagepanel.showDirectory("new file 1");workspace.storagepanel.storagePanel.filesPanel.setActiveTab(b)}var d=new Ext.LoadMask(b,{msg:"Chargement en cours ..."});d.show();symfony("list","files","storage",{path:h.raw.path},function(i){var k=b.counttab;var j=$("#storagetab_"+k);j.empty();$.each(i.data,function(o,p){var q="icon-empty_48";if(!p.leaf){q="icon-folder_48"}var m=$("<div>",{"class":"thumb icon "+q});var n=$("<div>",{"class":"label",html:p.text});var l=$("<div>",{"class":"tabitem",title:p.text});l.rec=p;l.append(m);l.append(n);l.on("dblclick",function(s){if(!l.rec.leaf){var r=a.getStore();a.selectPath(l.rec.fpath,"text",null,function(){var t=h.findChild("text",l.rec.text);a.fireEvent("itemclick",e,t)})}});j.append(l)});d.hide();$(document).tooltip()})}}}});xroot=a};