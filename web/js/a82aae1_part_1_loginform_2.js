Ext.onReady(function(){_script_name=_script_name.replace(/\/app\.php/g,"");var a={specialkey:function(g,f){if(f.getKey()===f.ENTER){fnLoginForm(d)}}};var d=Ext.create("Ext.form.Panel",{url:_request_scheme+"://"+_http_host+_script_name+"/login_check",renderTo:c,id:"loginform",cls:"my-form-class",defaults:{labelWidth:150},bodyStyle:"padding: 10px 10px 0 10px;",standardSubmit:true,items:[{xtype:"textfield",fieldLabel:"Compte",name:"_username",allowBlank:false,value:$("#_last_username").val(),listeners:a},{xtype:"textfield",inputType:"password",fieldLabel:"Mot de passe",name:"_password",allowBlank:false,listeners:a},{xtype:"checkbox",fieldLabel:"Se souvenir de moi",name:"_remember_me",checked:false,listeners:a},{xtype:"hidden",name:"_csrf_token",value:$("#csrf_token").val()}],buttons:[{id:"btn_login",text:"Se connecter",formBind:true,disabled:true,handler:function(){fnLoginForm(d)}},{id:"btn_reset",text:"Reinitialiser",handler:function(){fnResetForm(d)}}]});var b=$("#_error_message").val();if(b){d.title=b}var c=Ext.create("Ext.Window",{title:"Koolawa : Connexion",height:null,width:400,closable:false,items:[d]});c.show()});function fnLoginForm(a){a.getForm().submit({success:function(b,c){Ext.Msg.alert("Success","Login Successful!",function(d,e){if(d=="ok"){window.location=homeUrl}})},failure:function(b,c){Ext.Msg.alert("Warning",c.result.errorMessage)}})}function fnResetForm(a){a.getForm().reset()};